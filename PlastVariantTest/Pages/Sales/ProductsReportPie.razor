@* @inherits Fluxor.Blazor.Web.Components.FluxorComponent *@

@using Fluxor
@using PlastVariantTest.StateService.Customers
@using PlastVariantTest.StateService.Orders

@inject IState<OrdersReportState> State
@inject IDispatcher Dispatcher

<MudChart ChartType="ChartType.Donut"
          LegendPosition="Position.End"
          InputData="@State.Value.Orders.ToProductsReportItems().Select(x => (double)(x.Sum)).ToArray()"
          InputLabels="@State.Value.Orders.ToProductsReportItems().Select(x => x.Product.Name).ToArray()">
    <CustomGraphics>
        <text class="donut-inner-text" x="50%" y="35%" dominant-baseline="middle" text-anchor="middle" fill="black" font-family="Helvetica" font-size="20">Total</text>
        <text class="donut-inner-text" x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="black" font-family="Helvetica" font-size="30">@State.Value.Orders.ToProductsReportItems().Select(x => (double)(x.Sum)).ToArray()?.Sum().ToString("N2")</text>
    </CustomGraphics>
</MudChart>
